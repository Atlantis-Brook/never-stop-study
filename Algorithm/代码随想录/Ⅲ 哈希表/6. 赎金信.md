# 383. èµé‡‘ä¿¡
[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/linked-list-cycle-ii/)
- **å“ˆå¸Œæ³•**
```java
class Solution {
    public boolean canConstruct(String ransomNote, String magazine) {
        Map<Character, Integer> map = new HashMap<>();
        for (int i = 0; i < magazine.length(); i ++ ) {
            int count = map.getOrDefault(magazine.charAt(i), 0);
            if (count == 0) {
                map.put(magazine.charAt(i), 1);
            } else {
                map.put(magazine.charAt(i), count + 1);
            }
        }
        for (int i = 0; i < ransomNote.length(); i ++ ) { 
            int count = map.getOrDefault(ransomNote.charAt(i), 0);
            if (count == 0) {
                return false;
            } else {
                map.put(ransomNote.charAt(i), count - 1);
            }
        }
        return true;
    }
}
```
- **ä¼˜è§£ï¼šå“ˆå¸Œæ³•**
```java 
class Solution {
    public boolean canConstruct(String ransomNote, String magazine) {
        if (ransomNote.length() > magazine.length()) {
            return false;
        }
        int[] flag = new int[26];
        for (char c : magazine.toCharArray()) {
            flag[c - 'a'] ++ ;
        }
        for (char c : ransomNote.toCharArray()) { 
            flag[c - 'a'] -- ;
            if (flag[c - 'a'] < 0) {
                return false;
            } 
        }
        return true;
    }
}
```
- **æ€§èƒ½æ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ï¼šå“ˆå¸Œæ³•**
```java
class Solution {
    public boolean canConstruct(String ransomNote, String magazine) {
        int[]nums = new int[26];
        for (int i = 0; i < ransomNote.length(); i ++ ) {
            char c = ransomNote.charAt(i);
            int index = magazine.indexOf(c,nums[c - 'a']);
            if (index > -1) {
                nums[c - 'a'] = index + 1;
            } else {
                return false;
            }
        }
        return true;
    }
}
```
æ–¹æ³•`{java icon} String.indexOf(int ch, int fromIndex)` ä» **æŒ‡å®šä½ç½® `fromIndex` å¼€å§‹**ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­—ç¬¦ `ch` çš„**é¦–æ¬¡å‡ºç°ä½ç½®**ã€‚
- æ‰¾åˆ° â†’ è¿”å›å­—ç¬¦ä½ç½®ï¼ˆ>= 0ï¼‰
- æœªæ‰¾åˆ° â†’ è¿”å› `-1`
> indexOfä¸ºæ˜¯ä»€ä¹ˆå¿«ï¼Ÿ
# âš™ï¸ **åº•å±‚å®ç°ï¼ˆéå¸¸å…³é”®ï¼‰**
`String.indexOf` é‡‡ç”¨ **å†…è”ï¼ˆintrinsicï¼‰+ SIMD ä¼˜åŒ–** çš„è¶…é«˜æ•ˆå®ç°ï¼š
### 1. Java ä»£ç è°ƒç”¨åˆ° native å±‚
åœ¨ HotSpot JVM ä¸­ï¼Œ`indexOf` è¢«è¯†åˆ«ä¸º **intrinsic**ï¼ˆå›ºåŒ–åœ¨ JVM å†…çš„ C++ åŠ é€Ÿä»£ç ï¼‰ã€‚
### 2. å¯¹äº Latin-1 å­—ç¬¦ä¸²ï¼š
ä½¿ç”¨ `StringLatin1.indexOf(...)`  
åº•å±‚æ˜¯ä¸€ä¸ªçº¯ C++ å­—èŠ‚æ‰«æ **å¸¦å‘é‡åŠ é€Ÿï¼ˆSSE/AVXï¼‰**ã€‚
### 3. å¯¹äº UTF-16 å­—ç¬¦ä¸²ï¼š
ä½¿ç”¨ `StringUTF16.indexOf(...)`  
åŒæ ·æœ‰å‘é‡åŠ é€Ÿã€‚
### 4. å¾ªç¯æçŸ­ã€æ— åˆ†æ”¯ä¸”å¯é¢„æµ‹
å¤§é‡å¹³å°ä¸Šæ‰§è¡Œé€Ÿåº¦è¿œé«˜äºæ‰‹å†™å¾ªç¯ã€‚
ğŸ‘‰ è¿™å°±æ˜¯ä½ ä¹‹å‰ä»£ç ä¸­ `indexOf` **èƒ½æ¯”æ•°ç»„è®¡æ•°æ–¹æ¡ˆæ›´å¿«çš„åŸå› ä¹‹ä¸€**ã€‚