#es #elasticsearch
# 1. 悲观锁
对于一个共享数据，某个线程访问到这个数据的时候，会认为这个数据随时有可能会被其他线程访问而造成数据不安全的情况，因此线程在每次访问的时候都会对数据加一把锁。这样其他线程如果在加锁期间想访问当前数据就只能等待，也就是阻塞线程了。
# 2. 乐观锁
乐观锁的并不是真的加了一把锁。乐观锁机制表示线程在每次操作数据的时候，都乐观的认为不会有其他线程来会来操作当前数据，因此不加锁。但是乐观锁在每次更新数据的时候都会通过比对**版本号**来检查当前数据是不是被其他线程修改过。如果没有，则正常修改数据并且更新数据版本号，否则，仅更新自身版本号。
# 3. 如何选择
- 首先，乐观锁和悲观锁没有孰优孰劣，它们各自有ge'z
# 4.乐观锁并发控制